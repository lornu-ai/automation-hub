# Cloudflare Worker Configuration for audit-worker
# Issue #727: ArgoCD Notifications webhook receiver
# Receives deployment events from ArgoCD and performs lightweight orchestration tasks

name = "audit-worker"
main = "src/audit-worker.ts"
compatibility_date = "2024-01-01"
compatibility_flags = ["nodejs_compat"]

# Enable workers.dev subdomain (automatic: audit-worker.<account>.workers.dev)
workers_dev = true

# Note: Custom domain can be added later via Cloudflare Dashboard if needed
# The worker will be accessible at: https://audit-worker.<account-subdomain>.workers.dev

# Observability
[observability]
enabled = true

[observability.logs]
enabled = true
head_sampling_rate = 1
persist = true
invocation_logs = true

[observability.traces]
enabled = false

# Note: WORKER_TOKEN secret must be set via:
# wrangler secret put WORKER_TOKEN
